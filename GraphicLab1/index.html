<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lab 1</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>
    <!--1.	Построение сплайна, составленного из кубических кривых Безье.
    Необходимо построить гладкую кривую, проходящую через все точки заданного набора. 
    Кривая должна представлять из себя совокупность кубических кривых Безье. 
    Для нахождения недостающих точек для построения 
    кубических кривых Безье предлагается использовать алгоритм, рассмотренный в лекциях.-->
    
    <!--2. Трансформация растров (простейший алгоритм, билинейная и трилинейная фильтрация).
    Пользователь открывает в программе произвольное изображение, 
    мышью задает 3 точки на исходной картинке, задает другие 
    3 точки (соответствия) в области, где будет строиться новая картинка. 
    Задача: получить преобразованное изображение (повернутое, растянутое или 
    сжатое и т.п. в зависимости от рассчитанной матрицы преобразования). Использовать 
    билинейную фильтрацию при увеличении картинки и трилинейную – при ее уменьшении. 
    Также оставить в программе возможность продемонстрировать работу простейшего алгоритма.
    -->

    <script src="Graph.js">

    </script>
    
    <canvas id='Canvas1'>Обновите браузер</canvas>
    <script>
        //quadraticCurveTo(Px, Py, x, y) 
        //bezierCurveTo(P1x, P1y, P2x, P2y, x, y)
        /*x и y это точки в которые необходимо перейти, а координаты P(Px, Py) в квадратичной кривой это дополнительные точки которые используются для построения кривой. В кубическо кривой соответственно две дополнительные точки.
        Пример двух кривых:*/
        var Canvas1 = document.getElementById("Canvas1"),
            ctxLines     = Canvas1.getContext('2d');
            ctxPoints     = Canvas1.getContext('2d');
        Canvas1.height = 600;
        Canvas1.width  = 1000;

        x = 100;
        y = 80;
        
        ctxPoints.beginPath();
        ctxPoints.arc(300,300,5,0,Math.PI*2,true); // Внешняя окружность
        ctxPoints.stroke();

        ctxLines.beginPath();
        ctxLines.moveTo(300, 300);
        ctxLines.bezierCurveTo(75, 55, 175, 20, x, y);
        ctxLines.bezierCurveTo(95, 75, 195, 40, x + 20, y + 20);
        //ctx.moveTo(10, 15);
        //ctx.quadraticCurveTo(70, 100, x, y);
        ctxLines.stroke();


        //
        var context = Canvas1.getContext("2d");
        
        var lines = [];
        var startPos, endPos;
 
        Canvas1.onmousedown = function(event) {
            startPos = getCoords(event);
        }
 
        Canvas1.onmouseup = function(event) {
            endPos = getCoords(event);
            lines.push({
                startPos: startPos,
                endPos: endPos
            });
 
            // Draw lines
            lines.forEach(function(line) {
                drawLine(
                    line.startPos.x, line.startPos.y,
                    line.endPos.x, line.endPos.y);
            });
        }
 
        function drawLine(x1, y1, x2, y2) {
            context.beginPath();
            context.strokeStyle = "red";
            context.moveTo(x1, y1);
            context.lineTo(x2, y2);
            context.lineWidth = 2;
            context.stroke();
        }
 
        function getCoords() {
            var rect = event.target.getBoundingClientRect();
            var xMousePos = event.clientX - rect.left;
            var yMousePos = event.clientY - rect.top;
            return {
                x: xMousePos,
                y: yMousePos
            };
        }
    </script>

</body>
</html>