<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lab 1</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>
    <!--1.	Построение сплайна, составленного из кубических кривых Безье.
    Необходимо построить гладкую кривую, проходящую через все точки заданного набора. 
    Кривая должна представлять из себя совокупность кубических кривых Безье. 
    Для нахождения недостающих точек для построения 
    кубических кривых Безье предлагается использовать алгоритм, рассмотренный в лекциях.-->
    
    <!--2. Трансформация растров (простейший алгоритм, билинейная и трилинейная фильтрация).
    Пользователь открывает в программе произвольное изображение, 
    мышью задает 3 точки на исходной картинке, задает другие 
    3 точки (соответствия) в области, где будет строиться новая картинка. 
    Задача: получить преобразованное изображение (повернутое, растянутое или 
    сжатое и т.п. в зависимости от рассчитанной матрицы преобразования). Использовать 
    билинейную фильтрацию при увеличении картинки и трилинейную – при ее уменьшении. 
    Также оставить в программе возможность продемонстрировать работу простейшего алгоритма.
    -->

    <script src="Graph.js">

    </script>
    
    <canvas id='Canvas1'>Обновите браузер</canvas>

    <button class="AddLine" onclick="AddLine()"> Прямые </button>

    <script>
        //quadraticCurveTo(Px, Py, x, y) 
        //bezierCurveTo(P1x, P1y, P2x, P2y, x, y)
        /*x и y это точки в которые необходимо перейти, а координаты P(Px, Py) в квадратичной кривой это дополнительные точки которые используются для построения кривой. В кубическо кривой соответственно две дополнительные точки.
        Пример двух кривых:*/
        var Canvas1 = document.getElementById("Canvas1"),
            ctxLines = Canvas1.getContext('2d');
            ctxPoints = Canvas1.getContext('2d');
            ctxRounds = Canvas1.getContext('2d');
        Canvas1.height = 600;
        Canvas1.width  = 1200;

        let x = 100;
        let y = 80;
        let xMas = [100, 20, 30, 50];
        let yMas = [80, 45, 55, 75];
        
        ctxPoints.beginPath();
        ctxPoints.arc(300,300,5,0,Math.PI*2,true); // Внешняя окружность
        ctxPoints.stroke();

        ctxLines.beginPath();
        ctxLines.moveTo(300, 300);
        ctxLines.bezierCurveTo(75, 55, 175, 20, xMas[0], yMas[0]);
        ctxLines.bezierCurveTo(95, 75, 195, 40, xMas[0] + 20, yMas[0] + 20);
        //ctx.moveTo(10, 15);
        //ctx.quadraticCurveTo(70, 100, x, y);
        ctxLines.stroke();

        /*
        let ctx = Canvas1.getContext('2d');
        ctx.beginPath();
        ctx.moveTo(0, 0);
        let step = 1;
        let x1 = 0, y1 = 0; 
        for (let i = step; i<Canvas1.width; i+=step){//вертикальные
            ctx.moveTo(i, y1);
            y1 = Math.pow(i, 2);
            ctx.lineTo(i + step, y1);
        }
        ctx.stroke();
        */

        

        //
        /*
        for (var j = 0; j < 100; j++) {

            var newX = 0;

            var newY = 0;

            for (var i = 0; i < pointsAmount; i++) {

                var B = ((factorial(pointsAmount - 1) / (factorial(i) * factorial(pointsAmount - 1 - i)))
                    * Math.pow(currentT, i) * Math.pow(1 - currentT, pointsAmount - 1 - i));


                newX = newX + B * mainPoints.at(i).Xcoord;
                newY = newY + B * mainPoints.at(i).Ycoord;
            }

            drawPointsX.push(newX);
            drawPointsY.push(newY);

            currentT = currentT + step;
        }
        */
        //


        //
        let ctx = Canvas1.getContext('2d');
        ctx.beginPath();
        ctx.moveTo(0, 0);
        let step = 1;
        let x1 = 0, y1 = 0; 

        let mas = [];
        var context = Canvas1.getContext("2d");
        Canvas1.onclick = function(event){
            mas.push(event.clientX, event.clientY);
            ctxRounds.beginPath();
            ctxRounds.arc(event.clientX,event.clientY,5,0,Math.PI*2,true);
            ctxRounds.stroke();
            console.log(mas);

            ctx.lineTo(event.clientX, event.clientY);
            ctx.stroke();

            //return mas;
        }
        let ctx3 = Canvas1.getContext('2d');
        ctx3.beginPath();
ctx3.moveTo(50, 50);
ctx3.lineTo(150, 50);
ctx3.lineTo(200, 150);
ctx3.stroke();

        function AddLine() {
            let ctx5 = Canvas1.getContext('2d');
            ctx5.moveTo(mas[0], mas[1]);
            for(let i = 2; i < mas.length; i+=2){
                ctx5.lineTo(mas[i], mas[i+1]);
            }
            ctx5.stroke();
        }
        //ctx.stroke();
        /*
        var context = Canvas1.getContext("2d");
        
        var lines = [];
        var startPos, endPos;
 
        Canvas1.onmousedown = function(event) {
            startPos = getCoords(event);
        }
 
        Canvas1.onmouseup = function(event) {
            endPos = getCoords(event);
            lines.push({
                startPos: startPos,
                endPos: endPos
            });
 
            // Draw lines
            lines.forEach(function(line) {

                drawLine(
                    line.startPos.x, line.startPos.y,
                    line.endPos.x, line.endPos.y);
                    //ctxPoints.arc(startPos.x,startPos.y,5,0,Math.PI*2,true);
            });
        }
 
        function drawLine(x1, y1, x2, y2) {
            context.beginPath();
            context.strokeStyle = "red";
            context.moveTo(x1, y1);
            context.lineTo(x2, y2);
            context.lineWidth = 2;
            context.stroke();
        }
 
        function getCoords() {
            var rect = event.target.getBoundingClientRect();
            var xMousePos = event.clientX - rect.left;
            var yMousePos = event.clientY - rect.top;
            return {
                x: xMousePos,
                y: yMousePos
            };
        }*/
    </script>

</body>
</html>